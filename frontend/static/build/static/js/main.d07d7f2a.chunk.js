(this.webpackJsonpstatic=this.webpackJsonpstatic||[]).push([[0],{34:function(e,t,a){e.exports=a(46)},40:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(17),i=a.n(l),o=(a(39),a(40),a(14)),s=a.n(o),c=a(19),u=a(27),m=a(6),h=a(7),d=a(3),p=a(9),f=a(8),b=a(48),g=a(49);function v(e){return r.a.createElement("div",{className:"list-group"},r.a.createElement("div",{className:"list-group-item preview"},r.a.createElement("section",{className:"preview-body"},r.a.createElement("h4",{className:"preview-title"},e.article.title),r.a.createElement("h5",{className:"preview-category"},e.article.category),r.a.createElement("div",{className:"preview-para"},r.a.createElement("p",{className:"todo-title"},e.article.body)),r.a.createElement("button",{className:"btn view-art",type:"button",onClick:function(){return e.handleModal(e.article.id)}},"View Article")),r.a.createElement("p",{className:"preview-author"},"By ",e.article.user)))}function E(e){return r.a.createElement("div",{className:"list-group"},r.a.createElement("div",{className:"list-group-item side-preview"},r.a.createElement("p",{className:"side-art-title"},e.article.title),r.a.createElement("section",{id:"side-art-foot"},r.a.createElement("p",{className:"side-art-author"},"by ",e.article.user),r.a.createElement("button",{className:"btn view-side-art",type:"button",onClick:function(){return e.handleModal(e.article.id)}},"View Article"))))}var y=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={category:"Top Stories",show:!1,title:"",body:"",articleDisplay:{}},n.handleClick=n.handleClick.bind(Object(d.a)(n)),n.handleModal=n.handleModal.bind(Object(d.a)(n)),n}return Object(h.a)(a,[{key:"handleClick",value:function(e){this.setState({category:e})}},{key:"handleModal",value:function(e){var t=this.props.articles.findIndex((function(t){return t.id===e}));this.setState({articleDisplay:this.props.articles[t]}),this.setState({show:!this.state.show})}},{key:"render",value:function(){var e,t,a=this,n=this.state.category;return"Top Stories"===n?(e=this.props.articles.filter((function(e){return e.top_story})).map((function(e){return r.a.createElement(v,{key:e.id,article:e,handleModal:a.handleModal})})),t=this.props.articles.filter((function(e){return!e.top_story})).map((function(e){return r.a.createElement(E,{key:e.id,article:e,handleModal:a.handleModal})}))):"Sports"===n?(e=this.props.articles.filter((function(e){return"sports"===e.category})).map((function(e){return r.a.createElement(v,{key:e.id,article:e,handleModal:a.handleModal})})),t=this.props.articles.filter((function(e){return"sports"!==e.category})).map((function(e){return r.a.createElement(E,{key:e.id,article:e,handleModal:a.handleModal})}))):"Food"===n?(e=this.props.articles.filter((function(e){return"food"===e.category})).map((function(e){return r.a.createElement(v,{key:e.id,article:e,handleModal:a.handleModal})})),t=this.props.articles.filter((function(e){return"food"!==e.category})).map((function(e){return r.a.createElement(E,{key:e.id,article:e,handleModal:a.handleModal})}))):"Travel"===n?(e=this.props.articles.filter((function(e){return"travel"===e.category})).map((function(e){return r.a.createElement(v,{key:e.id,article:e,handleModal:a.handleModal})})),t=this.props.articles.filter((function(e){return"travel"!==e.category})).map((function(e){return r.a.createElement(E,{key:e.id,article:e,handleModal:a.handleModal})}))):"Entertainment"===n&&(e=this.props.articles.filter((function(e){return"entertainment"===e.category})).map((function(e){return r.a.createElement(v,{key:e.id,article:e,handleModal:a.handleModal})})),t=this.props.articles.filter((function(e){return"entertainment"!==e.category})).map((function(e){return r.a.createElement(E,{key:e.id,article:e,handleModal:a.handleModal})}))),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row page-content"},r.a.createElement("div",{className:"col-lg-8 "},r.a.createElement("section",{id:"pages",className:"row"},r.a.createElement("button",{className:" btn",onClick:function(){return a.handleClick("Top Stories")}},"Top Stories"),r.a.createElement("button",{className:" btn",onClick:function(){return a.handleClick("Sports")}},"Sports"),r.a.createElement("button",{className:" btn",onClick:function(){return a.handleClick("Food")}},"Food"),r.a.createElement("button",{className:" btn",onClick:function(){return a.handleClick("Travel")}},"Travel"),r.a.createElement("button",{className:" btn",onClick:function(){return a.handleClick("Entertainment")}},"Entertainment")),r.a.createElement("h1",{className:"main-title"},this.state.category),e),r.a.createElement("div",{className:"col-lg-4 side"},r.a.createElement("h2",{className:"side-title"},"This week"),t)),r.a.createElement(b.a,{animation:!1,dialogClassName:"display-article-modal",show:this.state.show},r.a.createElement(b.a.Header,null,this.state.articleDisplay.title),r.a.createElement(b.a.Body,null,this.state.articleDisplay.body),r.a.createElement(b.a.Footer,null,r.a.createElement(g.a,{onClick:function(e){return a.setState({show:!1})}},"Close"))))}}]),a}(r.a.Component),k=a(16),C=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={title:"",body:"",category:"travel",status:"draft",user:"",top_story:!1},n.handleChange=n.handleChange.bind(Object(d.a)(n)),n}return Object(h.a)(a,[{key:"handleChange",value:function(e){this.setState(Object(k.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this;return r.a.createElement("form",{className:"col-12",onSubmit:function(t){return e.props.handleSubmit(t,e.state)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{type:"text",className:"form-control",id:"title",name:"title",value:this.state.title,onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"body"},"Body"),r.a.createElement("textarea",{rows:"5",type:"text",className:"form-control",id:"body",name:"body",value:this.state.body,onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"category"},"Category"),r.a.createElement("select",{id:"category",className:"form-control",name:"category",value:this.state.category,onChange:this.handleChange},r.a.createElement("option",null,"travel"),r.a.createElement("option",null,"sports"),r.a.createElement("option",null,"entertainment"),r.a.createElement("option",null,"food")),r.a.createElement("label",{htmlFor:"status"},"Post Status"),r.a.createElement("select",{id:"status",className:"form-control",name:"status",value:this.state.status,onChange:this.handleChange},r.a.createElement("option",null,"draft"),r.a.createElement("option",null,"submit"),r.a.createElement("option",null,"publish"))),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Save"))}}]),a}(r.a.Component),N=a(33);function S(e){return r.a.createElement("div",{className:"list-group"},r.a.createElement("div",{className:"list-group-item preview"},r.a.createElement("h4",null,e.article.title),r.a.createElement("div",{className:"preview-para"},r.a.createElement("p",{className:"todo-title"},e.article.body)),r.a.createElement("button",{className:"btn view-art",type:"button",onClick:function(){return e.handleModal(e.article.id)}},"Edit Article")))}var w=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={displayStatus:"All Posts",show:!1,articleDisplay:{},title:"",body:"",category:"travel",status:"draft",user:"",top_story:!1,articles:[]},n.handleClick=n.handleClick.bind(Object(d.a)(n)),n.handleModal=n.handleModal.bind(Object(d.a)(n)),n.handleChange=n.handleChange.bind(Object(d.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.isStaff?fetch("/api/v1/articles/super-user-view").then((function(e){return e.json()})).then((function(t){return e.setState({articles:t})})).catch((function(e){return console.log("Error: ",e)})):fetch("/api/v1/articles/user-view").then((function(e){return e.json()})).then((function(t){return e.setState({articles:t})})).catch((function(e){return console.log("Error: ",e)}))}},{key:"handleClick",value:function(e){this.setState({displayStatus:e})}},{key:"handleModal",value:function(e){var t=this.state.articles.findIndex((function(t){return t.id===e}));this.setState({articleDisplay:this.state.articles[t]}),this.setState({show:!this.state.show})}},{key:"handleChange",value:function(e){var t=Object(N.a)({},this.state.articleDisplay);t[e.target.name]=e.target.value,this.setState({articleDisplay:t})}},{key:"render",value:function(){var e,t=this,a=this.state.displayStatus;return"All Posts"===a?e=this.state.articles.map((function(e){return r.a.createElement(S,{key:e.id,article:e,handleModal:t.handleModal})})):"Drafts"===a?e=this.state.articles.filter((function(e){return"draft"===e.status})).map((function(e){return r.a.createElement(S,{key:e.id,article:e,handleModal:t.handleModal})})):"Submited"===a?e=this.state.articles.filter((function(e){return"submit"===e.status})).map((function(e){return r.a.createElement(S,{key:e.id,article:e,handleModal:t.handleModal})})):"Published"===a&&(e=this.state.articles.filter((function(e){return"publish"===e.status})).map((function(e){return r.a.createElement(S,{key:e.id,article:e,handleModal:t.handleModal})}))),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row posts-page"},r.a.createElement("div",{className:"col-8"},r.a.createElement("section",{id:"pages",className:"row"},r.a.createElement("button",{className:" btn",onClick:function(){return t.handleClick("All Posts")}},"All Posts"),r.a.createElement("button",{className:" btn",onClick:function(){return t.handleClick("Drafts")}},"Drafts"),r.a.createElement("button",{className:" btn",onClick:function(){return t.handleClick("Submited")}},"Submited"),r.a.createElement("button",{className:" btn",onClick:function(){return t.handleClick("Published")}},"Published")),r.a.createElement("h1",{className:"posts-title"},this.state.displayStatus),e)),r.a.createElement(b.a,{animation:!1,show:this.state.show},r.a.createElement(b.a.Header,null,this.state.articleDisplay.title),r.a.createElement(b.a.Body,null,r.a.createElement("form",{className:"col-12",onSubmit:function(e){return t.props.editArticle(e,t.state.articleDisplay,t.state.articleDisplay.id)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{type:"text",className:"form-control",id:"title",name:"title",value:this.state.articleDisplay.title,onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"body"},"Body"),r.a.createElement("textarea",{rows:"5",type:"text",className:"form-control",id:"body",name:"body",value:this.state.articleDisplay.body,onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"category"},"Category"),r.a.createElement("select",{id:"category",className:"form-control",name:"category",value:this.state.articleDisplay.category,onChange:this.handleChange},r.a.createElement("option",null,"travel"),r.a.createElement("option",null,"sports"),r.a.createElement("option",null,"entertainment"),r.a.createElement("option",null,"food")),r.a.createElement("label",{htmlFor:"status"},"Post Status"),r.a.createElement("select",{id:"status",className:"form-control",name:"status",value:this.state.articleDisplay.status,onChange:this.handleChange},r.a.createElement("option",null,"draft"),r.a.createElement("option",null,"submit"),r.a.createElement("option",null,"publish"))),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Save"))),r.a.createElement(b.a.Footer,null,r.a.createElement(g.a,{onClick:function(){return t.props.deleteArticle(t.state.articleDisplay.id)}},"Delete"),r.a.createElement(g.a,{onClick:function(e){return t.setState({show:!1})}},"Close"))))}}]),a}(r.a.Component),j=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={username:"",email:"",password1:"",password2:""},n.handleChange=n.handleChange.bind(Object(d.a)(n)),n}return Object(h.a)(a,[{key:"handleChange",value:function(e){this.setState(Object(k.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h1",null,"Register"),r.a.createElement("form",{className:"col-4",onSubmit:function(t){return e.props.handleRegistration(t,e.state)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"title"},"username"),r.a.createElement("input",{type:"text",className:"form-control",id:"username",name:"username",value:this.state.title,onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"title"},"email"),r.a.createElement("input",{type:"email",className:"form-control",id:"email",name:"email",value:this.state.title,onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"title"},"password1"),r.a.createElement("input",{type:"text",className:"form-control",id:"password1",name:"password1",value:this.state.title,onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"title"},"password2"),r.a.createElement("input",{type:"text",className:"form-control",id:"password2",name:"password2",value:this.state.title,onChange:this.handleChange})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Save")))}}]),a}(r.a.Component),O=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={username:"",email:"",password:"",register:!1},n.handleChange=n.handleChange.bind(Object(d.a)(n)),n}return Object(h.a)(a,[{key:"handleChange",value:function(e){this.setState(Object(k.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h1",null,"Login"),r.a.createElement("form",{className:"col-4",onSubmit:function(t){return e.props.handleLogin(t,e.state,e.state.register)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"title"},"username"),r.a.createElement("input",{type:"text",className:"form-control",id:"username",name:"username",value:this.state.title,onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"title"},"email"),r.a.createElement("input",{type:"email",className:"form-control",id:"email",name:"email",value:this.state.title,onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"title"},"password"),r.a.createElement("input",{type:"text",className:"form-control",id:"password",name:"password",value:this.state.title,onChange:this.handleChange})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Login"),r.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:function(){return e.setState({register:!0})}},"Register")))}}]),a}(r.a.Component),M=a(10),F=a.n(M),D=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={image:null,preview:""},n.addImage=n.addImage.bind(Object(d.a)(n)),n.handleImage=n.handleImage.bind(Object(d.a)(n)),n}return Object(h.a)(a,[{key:"addImage",value:function(){var e=Object(c.a)(s.a.mark((function e(t){var a,n,r,l,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(a=new FormData).append("avatar",this.state.image),console.log(a),n={method:"POST",headers:{"X-CSRFToken":F.a.get("csrftoken")},body:a},r=function(e){return console.warn(e)},e.next=8,fetch("/api/v1/profile/",n);case 8:return l=e.sent,e.next=11,l.json().catch(r);case 11:i=e.sent,console.log(i);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleImage",value:function(e){var t=this,a=e.target.files[0];this.setState({image:a});var n=new FileReader;n.onloadend=function(){t.setState({preview:n.result})},n.readAsDataURL(a)}},{key:"render",value:function(){return r.a.createElement("form",{className:"col-12",onSubmit:this.addImage},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"avatar"},"Add picture"),r.a.createElement("input",{type:"file",id:"avatar",name:"avatar",onChange:this.handleImage}),r.a.createElement("img",{src:this.state.preview,alt:""})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Add Profile"))}}]),a}(r.a.Component),T=(a(45),function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={articles:[],page:"home",loggedIn:!!F.a.get("Authorization"),isStaff:!!localStorage.getItem("is_staff")},n.handleSubmit=n.handleSubmit.bind(Object(d.a)(n)),n.handleClick=n.handleClick.bind(Object(d.a)(n)),n.deleteArticle=n.deleteArticle.bind(Object(d.a)(n)),n.editArticle=n.editArticle.bind(Object(d.a)(n)),n.handleRegistration=n.handleRegistration.bind(Object(d.a)(n)),n.handleLogin=n.handleLogin.bind(Object(d.a)(n)),n.handleLogout=n.handleLogout.bind(Object(d.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/v1/articles/").then((function(e){return e.json()})).then((function(t){return e.setState({articles:t})})).catch((function(e){return console.log("Error: ",e)}))}},{key:"handleSubmit",value:function(e,t){var a=this;e.preventDefault();var n=F.a.get("csrftoken");console.log("data",t),fetch("/api/v1/articles/",{method:"POST",headers:{"X-CSRFToken":n,"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((function(e){console.log("firing",e);var t=[].concat(Object(u.a)(a.state.articles),[e]);a.setState({articles:t})})).catch((function(e){console.error("Error:",e)}))}},{key:"deleteArticle",value:function(e){var t=this,a=F.a.get("csrftoken");fetch("/api/v1/articles/".concat(e,"/"),{method:"DELETE",headers:{"X-CSRFToken":a}}).then((function(e){return e})).then((function(a){var n=Object(u.a)(t.state.articles),r=n.findIndex((function(t){return t.id===e}));n.splice(r,1),t.setState({articles:n})})).catch((function(e){return console.log("Error:",e)}))}},{key:"editArticle",value:function(e,t,a){e.preventDefault();var n=F.a.get("csrftoken");fetch("api/v1/articles/".concat(a,"/"),{method:"PUT",headers:{"X-CSRFToken":n,"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){return console.log(e)})).catch((function(e){return console.log("Error:",e)}))}},{key:"handleClick",value:function(e){this.setState({page:e})}},{key:"handleRegistration",value:function(){var e=Object(c.a)(s.a.mark((function e(t,a){var n,r,l,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":F.a.get("csrftoken")},body:JSON.stringify(a)},r=function(e){return console.warn(e)},e.next=5,fetch("/api/v1/rest-auth/registration/",n);case 5:return l=e.sent,e.next=8,l.json().catch(r);case 8:(i=e.sent).key&&(F.a.set("Authorization","Token ".concat(i.key)),this.setState({page:"posts"}),this.setState({loggedIN:!0}));case 10:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"handleLogin",value:function(){var e=Object(c.a)(s.a.mark((function e(t,a,n){var r,l,i,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!n){e.next=5;break}this.setState({page:"register"}),e.next=14;break;case 5:return r={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":F.a.get("csrftoken")},body:JSON.stringify(a)},l=function(e){return console.warn(e)},e.next=9,fetch("/api/v1/rest-auth/login/",r);case 9:return i=e.sent,e.next=12,i.json().catch(l);case 12:(o=e.sent).key&&(F.a.set("Authorization","Token ".concat(o.key)),this.setState({loggedIn:!0}),this.setState({page:"posts"}),localStorage.setItem("is_staff",o.is_staff));case 14:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"handleLogout",value:function(){var e=Object(c.a)(s.a.mark((function e(t){var a,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":F.a.get("csrftoken")}},n=function(e){return console.warn(e)},e.next=5,fetch("/api/v1/rest-auth/logout/",a);case 5:return r=e.sent,e.next=8,r.json().catch(n);case 8:"Successfully logged out."===e.sent.detail&&(F.a.remove("Authorization"),this.setState({page:"home"}),this.setState({loggedIn:!1}),localStorage.clear());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this,a=this.state.page;return"home"===a?e=r.a.createElement(y,{articles:this.state.articles}):"form"===a?e=r.a.createElement(C,{handleSubmit:this.handleSubmit}):"posts"===a?e=r.a.createElement(r.a.Fragment,null,r.a.createElement(w,{deleteArticle:this.deleteArticle,editArticle:this.editArticle,handleLogout:this.handleLogout,isStaff:this.state.isStaff}),r.a.createElement(C,{handleSubmit:this.handleSubmit}),r.a.createElement(D,null)):"register"===a?e=r.a.createElement(j,{handleRegistration:this.handleRegistration}):"login"===a&&(e=r.a.createElement(O,{handleLogin:this.handleLogin})),r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"navbar navbar-dark"},r.a.createElement("div",{className:"pages"},r.a.createElement("div",{className:"nav-buttons"},r.a.createElement("button",{className:"btn  menu-button",type:"button",onClick:function(){return t.handleClick("home")}},"Home")),this.state.loggedIn?r.a.createElement("div",{className:"log-status"},r.a.createElement("button",{className:"btn  menu-button",type:"button",onClick:function(){return t.handleClick("posts")}},"Posts"),r.a.createElement("button",{className:"btn  menu-button",type:"button",onClick:this.handleLogout},"Logout")):r.a.createElement("div",{className:"log-status"},r.a.createElement("button",{className:"btn  menu-button",type:"button",onClick:function(){return t.handleClick("login")}},"Login")))),r.a.createElement("div",{className:"page-title"},r.a.createElement("h1",null,"Fake News")),r.a.createElement("div",{className:"container fullpage"},e))}}]),a}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[34,1,2]]]);
//# sourceMappingURL=main.d07d7f2a.chunk.js.map